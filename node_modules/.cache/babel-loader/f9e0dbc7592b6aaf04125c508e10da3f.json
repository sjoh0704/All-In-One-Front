{"ast":null,"code":"import _regeneratorRuntime from\"/home/seungju_oh@tmax.co.kr/seung/all-in-one/All-In-One-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/seungju_oh@tmax.co.kr/seung/all-in-one/All-In-One-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/seungju_oh@tmax.co.kr/seung/all-in-one/All-In-One-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/seungju_oh@tmax.co.kr/seung/all-in-one/All-In-One-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/seungju_oh@tmax.co.kr/seung/all-in-one/All-In-One-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{Container,Row,Col,Form,Button}from\"react-bootstrap\";import Title from\"./Title\";import{useDispatch,useSelector}from\"react-redux\";import axios from\"axios\";import{loginAction,logoutAction}from\"../modules/user\";import{CategoryDirection}from\"./CategoryBanner\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Profile(_ref){var history=_ref.history;var dispatch=useDispatch();var _useSelector=useSelector(function(state){return{isLoggedIn:state.user.isLoggedIn,userData:state.user.payload};}),isLoggedIn=_useSelector.isLoggedIn,userData=_useSelector.userData;console.log(userData);var _useState=useState({username:userData.username,email:userData.useremail,phone_number:userData.phone_number}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var username=user.username,email=user.email,phone_number=user.phone_number;var user_id=userData.user_id;var onChangeHandler=function onChangeHandler(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},name,value)));};var onClickEditHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var body;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();body={user_id:user_id,username:username,useremail:email,phone_number:phone_number};_context.next=4;return axios.post(\"/apis/v1/user/\".concat(user_id),body).then(function(response){alert(\"사용자 정보 수정 완료\");dispatch(loginAction(body));}).catch(function(e){alert(\"사용자 정보 수정 실패\");});case 4:case\"end\":return _context.stop();}}},_callee);}));return function onClickEditHandler(_x){return _ref2.apply(this,arguments);};}();var onClickDeleteHandler=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.next=3;return axios.delete(\"/apis/v1/user/\".concat(user_id)).then(function(response){console.log(response);alert(\"회원 탈퇴 완료\");dispatch(logoutAction());history.replace(\"/\");}).catch(function(e){alert(\"회원 탈퇴 실패\");});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function onClickDeleteHandler(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(CategoryDirection,{tag1:\"내정보 관리\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:\"1.2rem\"},children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{lg:{span:10,offset:3},sm:{span:12,offset:0},children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(Form.Group,{as:Row,controlId:\"exampleForm.ControlInput1\",children:[/*#__PURE__*/_jsx(Form.Label,{column:true,sm:\"2\",lg:\"1\",style:{padding:10},children:\"\\uC544\\uC774\\uB514\"}),/*#__PURE__*/_jsx(Col,{sm:\"8\",lg:\"6\",children:/*#__PURE__*/_jsx(Form.Control,{size:\"lg\",name:\"username\",value:username,onChange:onChangeHandler,placeholder:\"ID\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\"})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Form.Group,{as:Row,controlId:\"exampleForm.ControlInput1\",children:[/*#__PURE__*/_jsx(Form.Label,{column:true,sm:\"2\",lg:\"1\",style:{padding:10},children:\"\\uC774\\uBA54\\uC77C\"}),/*#__PURE__*/_jsx(Col,{sm:\"8\",lg:\"6\",children:/*#__PURE__*/_jsx(Form.Control,{size:\"lg\",name:\"email\",value:email,onChange:onChangeHandler,placeholder:\"email\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\"})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Form.Group,{as:Row,controlId:\"exampleForm.ControlInput1\",children:[/*#__PURE__*/_jsx(Form.Label,{column:true,sm:\"2\",lg:\"1\",style:{padding:10},children:\"\\uC804\\uD654\\uBC88\\uD638\"}),/*#__PURE__*/_jsx(Col,{sm:\"8\",lg:\"6\",children:/*#__PURE__*/_jsx(Form.Control,{size:\"lg\",name:\"phone_number\",value:phone_number,onChange:onChangeHandler,placeholder:\"\\uB300\\uC2DC(-) \\uC5C6\\uC774 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\"})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{lg:{span:2,offset:3},sm:{span:3,offset:4},children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-grid gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"filledButton\",style:{fontSize:\"1.3rem\",height:40},onClick:onClickEditHandler,children:\"\\uC218\\uC815\"}),/*#__PURE__*/_jsx(\"span\",{children:\" \"})]})}),/*#__PURE__*/_jsx(Col,{lg:{span:2,offset:0},sm:{span:3,offset:0},children:/*#__PURE__*/_jsx(\"div\",{className:\"d-grid gap-2\",children:/*#__PURE__*/_jsx(\"button\",{className:\"emptyButton\",style:{fontSize:\"1.3rem\",height:40},onClick:onClickDeleteHandler,children:\"\\uD68C\\uC6D0 \\uD0C8\\uD1F4\"})})})]})]})})})})]})});}export default Profile;","map":{"version":3,"sources":["/home/seungju_oh@tmax.co.kr/seung/all-in-one/All-In-One-front/src/components/Profile.js"],"names":["React","useState","Container","Row","Col","Form","Button","Title","useDispatch","useSelector","axios","loginAction","logoutAction","CategoryDirection","Profile","history","dispatch","state","isLoggedIn","user","userData","payload","console","log","username","email","useremail","phone_number","setUser","user_id","onChangeHandler","e","target","name","value","onClickEditHandler","preventDefault","body","post","then","response","alert","catch","onClickDeleteHandler","delete","replace","fontSize","span","offset","padding","height"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Container, Row, Col, Form, Button } from \"react-bootstrap\";\nimport Title from \"./Title\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport axios from \"axios\";\nimport { loginAction, logoutAction } from \"../modules/user\";\nimport { CategoryDirection } from \"./CategoryBanner\";\n\nfunction Profile({ history }) {\n    const dispatch = useDispatch();\n    const { isLoggedIn, userData } = useSelector((state) => ({\n        isLoggedIn: state.user.isLoggedIn,\n        userData: state.user.payload,\n    }));\n\n    console.log(userData);\n\n    const [user, setUser] = useState({\n        username: userData.username,\n        email: userData.useremail,\n        phone_number: userData.phone_number,\n    });\n    const { username, email, phone_number } = user;\n    const user_id = userData.user_id;\n\n    const onChangeHandler = (e) => {\n        const { name, value } = e.target;\n        setUser({\n            ...user,\n            [name]: value,\n        });\n    };\n    const onClickEditHandler = async (e) => {\n        e.preventDefault();\n        let body = {\n            user_id: user_id,\n            username: username,\n            useremail: email,\n            phone_number: phone_number,\n        };\n        await axios\n            .post(`/apis/v1/user/${user_id}`, body)\n            .then((response) => {\n                alert(\"사용자 정보 수정 완료\");\n                dispatch(loginAction(body));\n            })\n            .catch((e) => {\n                alert(\"사용자 정보 수정 실패\");\n            });\n    };\n\n    const onClickDeleteHandler = async (e) => {\n        e.preventDefault();\n        await axios\n            .delete(`/apis/v1/user/${user_id}`)\n            .then((response) => {\n                console.log(response);\n                alert(\"회원 탈퇴 완료\");\n                dispatch(logoutAction());\n                history.replace(\"/\");\n            })\n            .catch((e) => {\n                alert(\"회원 탈퇴 실패\");\n            });\n    };\n\n    return (\n        <div>\n            <Container>\n                <CategoryDirection tag1={\"내정보 관리\"}></CategoryDirection>\n                <br />\n                <div style={{ fontSize: \"1.2rem\" }}>\n                    <Row>\n                        <Col\n                            lg={{ span: 10, offset: 3 }}\n                            sm={{ span: 12, offset: 0 }}\n                        >\n                            <Form>\n                                <Form.Group\n                                    as={Row}\n                                    controlId=\"exampleForm.ControlInput1\"\n                                >\n                                    <Form.Label\n                                        column\n                                        sm=\"2\"\n                                        lg=\"1\"\n                                        style={{ padding: 10 }}\n                                    >\n                                        아이디\n                                    </Form.Label>\n                                    <Col sm=\"8\" lg=\"6\">\n                                        <Form.Control\n                                            size=\"lg\"\n                                            name=\"username\"\n                                            value={username}\n                                            onChange={onChangeHandler}\n                                            placeholder=\"ID를 입력해주세요\"\n                                        />\n                                    </Col>\n                                </Form.Group>\n                                <br />\n                                <Form.Group\n                                    as={Row}\n                                    controlId=\"exampleForm.ControlInput1\"\n                                >\n                                    <Form.Label\n                                        column\n                                        sm=\"2\"\n                                        lg=\"1\"\n                                        style={{ padding: 10 }}\n                                    >\n                                        이메일\n                                    </Form.Label>\n                                    <Col sm=\"8\" lg=\"6\">\n                                        <Form.Control\n                                            size=\"lg\"\n                                            name=\"email\"\n                                            value={email}\n                                            onChange={onChangeHandler}\n                                            placeholder=\"email을 입력해주세요\"\n                                        />\n                                    </Col>\n                                </Form.Group>\n                                <br />\n                                <Form.Group\n                                    as={Row}\n                                    controlId=\"exampleForm.ControlInput1\"\n                                >\n                                    <Form.Label\n                                        column\n                                        sm=\"2\"\n                                        lg=\"1\"\n                                        style={{ padding: 10 }}\n                                    >\n                                        전화번호\n                                    </Form.Label>\n                                    <Col sm=\"8\" lg=\"6\">\n                                        <Form.Control\n                                            size=\"lg\"\n                                            name=\"phone_number\"\n                                            value={phone_number}\n                                            onChange={onChangeHandler}\n                                            placeholder=\"대시(-) 없이 입력해주세요\"\n                                        />\n                                    </Col>\n                                </Form.Group>\n                                <br />\n\n                                <Row>\n                                    <Col\n                                        lg={{ span: 2, offset: 3 }}\n                                        sm={{ span: 3, offset: 4 }}\n                                    >\n                                        <div className=\"d-grid gap-2\">\n                                            <button\n                                                className=\"filledButton\"\n                                                style={{\n                                                    fontSize: \"1.3rem\",\n                                                    height: 40,\n                                                }}\n                                                onClick={onClickEditHandler}\n                                            >\n                                                수정\n                                            </button>\n                                            <span> </span>\n                                        </div>\n                                    </Col>\n                                    <Col\n                                        lg={{ span: 2, offset: 0 }}\n                                        sm={{ span: 3, offset: 0 }}\n                                    >\n                                        <div className=\"d-grid gap-2\">\n                                            <button\n                                                className=\"emptyButton\"\n                                                style={{\n                                                    fontSize: \"1.3rem\",\n                                                    height: 40,\n                                                }}\n                                                onClick={onClickDeleteHandler}\n                                            >\n                                                회원 탈퇴\n                                            </button>\n                                        </div>\n                                    </Col>\n                                </Row>\n                            </Form>\n                        </Col>\n                    </Row>\n                </div>\n            </Container>\n        </div>\n    );\n}\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}