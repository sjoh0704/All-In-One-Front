{"ast":null,"code":"import _regeneratorRuntime from\"/home/seungju_oh@tmax.co.kr/seung/all-in-one/All-In-One-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"/home/seungju_oh@tmax.co.kr/seung/all-in-one/All-In-One-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _asyncToGenerator from\"/home/seungju_oh@tmax.co.kr/seung/all-in-one/All-In-One-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/seungju_oh@tmax.co.kr/seung/all-in-one/All-In-One-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{ListGroup,Container,Row,Col,Button}from\"react-bootstrap\";import Title from\"./Title\";import{useSelector}from\"react-redux\";import placeholder from\"../assets/images/placeholder2.jpg\";import{Link}from\"react-router-dom\";import EmptyCheck from\"./EmptyCheck\";import{setDate,setMoney}from\"./Convenient\";import{CategoryDirection}from\"./CategoryBanner\";import Modal from\"./Modal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MySales(_ref){var history=_ref.history;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modalOpen=_useState2[0],setModalOpen=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),modalContents=_useState4[0],setModalContents=_useState4[1];var closeModal=function closeModal(){setModalOpen(false);};var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),flag=_useState6[0],setFlag=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),products=_useState8[0],setProducts=_useState8[1];var _useSelector=useSelector(function(state){return{isLoggedIn:state.user.isLoggedIn,userData:state.user.payload};}),isLoggedIn=_useSelector.isLoggedIn,userData=_useSelector.userData;var fetchOrders=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,product_list;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/apis/v1/product/user/\"+userData.user_id);case 2:res=_context.sent;product_list=res.data.payload.filter(function(p){return p.valid===true;});product_list=product_list.map(function(product,index){var path=\"/mysales/\"+product.pk;return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{style:{padding:30},children:[/*#__PURE__*/_jsx(Col,{sm:{span:6,offset:0},lg:{span:5,offset:0},xs:\"12\",children:/*#__PURE__*/_jsx(Link,{style:{textDecoration:\"none\",color:\"inherit\"},to:path,children:/*#__PURE__*/_jsx(\"img\",{style:{maxWidth:\"100%\",height:\"auto\"},src:product.base64_image_url?product.base64_image_url:placeholder})},index)}),/*#__PURE__*/_jsx(Col,{sm:\"6\",lg:{span:5,offset:1},xs:\"12\",children:/*#__PURE__*/_jsxs(\"div\",{style:{paddingTop:10},children:[/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"1.5rem\",fontWeight:\"bold\"},children:product.name}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:\"1.3rem\"},children:[\"\\uCD1D \\uC218\\uB7C9: \",product.quantity]}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:\"1.2rem\"},children:[\"\\uAC00\\uACA9: \",setMoney(product.price),\" \\u20A9\"]}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:\"1.2rem\"},children:[\"\\uB4F1\\uB85D \\uB0A0\\uC9DC: \",setDate(product.created_at)]}),/*#__PURE__*/_jsx(Link,{style:{textDecoration:\"none\",color:\"inherit\"},to:path,children:/*#__PURE__*/_jsx(\"p\",{style:{fontSize:\"1.3rem\",color:\"green\"},children:\"\\uC8FC\\uBB38\\uD55C \\uC0AC\\uB78C\\uC774 \\uC788\\uB294\\uC9C0 \\uD655\\uC778\\uD574\\uC8FC\\uC138\\uC694!\"})},index),/*#__PURE__*/_jsx(Button,{variant:\"outline-light\",style:_defineProperty({fontSize:\"1rem\",background:\"#e85255\"},\"fontSize\",\"1.3rem\"),onClick:function onClick(e){return onDeleteProduct(product.pk,e);},children:\"\\uC0C1\\uD488 \\uB4F1\\uB85D \\uCDE8\\uC18C\"})]})})]})},index);});setProducts(product_list);case 6:case\"end\":return _context.stop();}}},_callee);}));return function fetchOrders(){return _ref2.apply(this,arguments);};}();var onDeleteProduct=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(product_id,e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setModalOpen(true);setModalContents(\"상품 등록을 취소합니다\");axios.delete(\"/apis/v1/product/\".concat(product_id)).then(function(res){setFlag(!flag);}).catch(function(e){setModalOpen(true);setModalContents(\"문제가 발생했습니다. 관리자에게 문의하세요.\");});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function onDeleteProduct(_x,_x2){return _ref4.apply(this,arguments);};}();useEffect(function(){fetchOrders();},[userData.user_id,flag]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Modal,{open:modalOpen,close:closeModal,children:modalContents}),/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(CategoryDirection,{tag1:\"내 상품 목록\"}),/*#__PURE__*/_jsx(EmptyCheck,{text:\"등록한 상품이 없습니다\",items:products})]})]});}export default MySales;","map":{"version":3,"sources":["/home/seungju_oh@tmax.co.kr/seung/all-in-one/All-In-One-front/src/components/MySales.js"],"names":["React","useState","useEffect","axios","ListGroup","Container","Row","Col","Button","Title","useSelector","placeholder","Link","EmptyCheck","setDate","setMoney","CategoryDirection","Modal","MySales","history","modalOpen","setModalOpen","modalContents","setModalContents","closeModal","flag","setFlag","products","setProducts","state","isLoggedIn","user","userData","payload","fetchOrders","get","user_id","res","product_list","data","filter","p","valid","map","product","index","path","pk","padding","span","offset","textDecoration","color","maxWidth","height","base64_image_url","paddingTop","fontSize","fontWeight","name","quantity","price","created_at","background","e","onDeleteProduct","product_id","delete","then","catch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { ListGroup, Container, Row, Col, Button } from \"react-bootstrap\";\nimport Title from \"./Title\";\nimport { useSelector } from \"react-redux\";\nimport placeholder from \"../assets/images/placeholder2.jpg\";\nimport { Link } from \"react-router-dom\";\nimport EmptyCheck from \"./EmptyCheck\";\nimport { setDate, setMoney } from \"./Convenient\";\nimport { CategoryDirection } from \"./CategoryBanner\";\nimport Modal from \"./Modal\";\n\nfunction MySales({ history }) {\n    const [modalOpen, setModalOpen] = useState(false);\n    const [modalContents, setModalContents] = useState(\"\");\n    const closeModal = () => {\n        setModalOpen(false);\n    };\n\n    const [flag, setFlag] = useState(true);\n    const [products, setProducts] = useState([]);\n    const { isLoggedIn, userData } = useSelector((state) => ({\n        isLoggedIn: state.user.isLoggedIn,\n        userData: state.user.payload,\n    }));\n\n    const fetchOrders = async () => {\n        const res = await axios.get(\n            \"/apis/v1/product/user/\" + userData.user_id\n        );\n        let product_list = res.data.payload.filter((p) => p.valid === true);\n        product_list = product_list.map((product, index) => {\n            let path = \"/mysales/\" + product.pk;\n            return (\n                <ListGroup.Item key={index}>\n                    <Row style={{ padding: 30 }}>\n                        <Col\n                            sm={{ span: 6, offset: 0 }}\n                            lg={{ span: 5, offset: 0 }}\n                            xs=\"12\"\n                        >\n                            <Link\n                                style={{\n                                    textDecoration: \"none\",\n                                    color: \"inherit\",\n                                }}\n                                key={index}\n                                to={path}\n                            >\n                                <img\n                                    style={{ maxWidth: \"100%\", height: \"auto\" }}\n                                    src={\n                                        product.base64_image_url\n                                            ? product.base64_image_url\n                                            : placeholder\n                                    }\n                                ></img>\n                            </Link>\n                        </Col>\n\n                        <Col sm=\"6\" lg={{ span: 5, offset: 1 }} xs=\"12\">\n                            <div style={{ paddingTop: 10 }}>\n                                <p\n                                    style={{\n                                        fontSize: \"1.5rem\",\n                                        fontWeight: \"bold\",\n                                    }}\n                                >\n                                    {product.name}\n                                </p>\n                                <p style={{ fontSize: \"1.3rem\" }}>\n                                    총 수량: {product.quantity}\n                                </p>\n                                <p style={{ fontSize: \"1.2rem\" }}>\n                                    가격: {setMoney(product.price)} ₩\n                                </p>\n                                <p style={{ fontSize: \"1.2rem\" }}>\n                                    등록 날짜: {setDate(product.created_at)}\n                                </p>\n                                <Link\n                                    style={{\n                                        textDecoration: \"none\",\n                                        color: \"inherit\",\n                                    }}\n                                    key={index}\n                                    to={path}\n                                >\n                                    <p\n                                        style={{\n                                            fontSize: \"1.3rem\",\n                                            color: \"green\",\n                                        }}\n                                    >\n                                        주문한 사람이 있는지 확인해주세요!\n                                    </p>\n                                </Link>\n                                <Button\n                                    variant=\"outline-light\"\n                                    style={{\n                                        fontSize: \"1rem\",\n                                        background: \"#e85255\",\n                                        fontSize: \"1.3rem\",\n                                    }}\n                                    onClick={(e) =>\n                                        onDeleteProduct(product.pk, e)\n                                    }\n                                >\n                                    상품 등록 취소\n                                </Button>\n                            </div>\n                        </Col>\n                    </Row>\n                </ListGroup.Item>\n            );\n        });\n        setProducts(product_list);\n    };\n\n    const onDeleteProduct = async (product_id, e) => {\n        setModalOpen(true);\n        setModalContents(\"상품 등록을 취소합니다\");\n        axios\n            .delete(`/apis/v1/product/${product_id}`)\n            .then((res) => {\n                setFlag(!flag);\n            })\n            .catch((e) => {\n                setModalOpen(true);\n                setModalContents(\"문제가 발생했습니다. 관리자에게 문의하세요.\");\n            });\n    };\n\n    useEffect(() => {\n        fetchOrders();\n    }, [userData.user_id, flag]);\n\n    return (\n        <div>\n            <Modal open={modalOpen} close={closeModal}>\n                {modalContents}\n            </Modal>\n\n            <Container>\n                <CategoryDirection tag1={\"내 상품 목록\"}></CategoryDirection>\n\n                <EmptyCheck\n                    text={\"등록한 상품이 없습니다\"}\n                    items={products}\n                ></EmptyCheck>\n            </Container>\n        </div>\n    );\n}\n\nexport default MySales;\n"]},"metadata":{},"sourceType":"module"}